{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tom\\\\Desktop\\\\university\\\\thirdYear\\\\semester6\\\\SEWorkshop\\\\TradingSystem\\\\Client\\\\src\\\\App.js\";\nimport { Component } from 'react';\nimport './App.css';\nimport Login from './components/Login';\nimport HomePageSearch from './components/HomePageSearch';\nimport Register from './components/Register';\nimport Payment from './components/Payment';\nimport Supply from './components/Supply'; // import * as React from 'react';\n// import ReactDOM from 'react-dom';\n\nimport Button from '@mui/material/Button';\nimport StorePage from './components/StorePage';\nimport ShoppingCart from './components/ShoppingCart'; // function App() {\n//   return <Button variant=\"contained\">Hello World</Button>;\n// }\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoggedIn: false,\n      ownedStoreList: [],\n      userName: '',\n      role: undefined,\n      messages: [],\n      webSocketConnection: undefined\n    }; // this.userApi = new UserApi();\n    // this.storeApi = new StoreApi();\n    // this.addOwnedStoreHandler = this.addOwnedStoreHandler.bind(this);\n    // this.updateLoginHandler = this.updateLoginHandler.bind(this);\n    // this.updateLogoutHandler = this.updateLogoutHandler.bind(this);\n  }\n\n  async connectToWebSocket() {\n    const socketConnection = new HubConnectionBuilder().configureLogging(LogLevel.Debug).withUrl(\"https://localhost:5001/messageHub\", {\n      skipNegotiation: true,\n      transport: HttpTransportType.WebSockets\n    }).build(); //console.log(\"socketConnection\")\n\n    await socketConnection.start();\n\n    if (socketConnection) {\n      //console.log(\"socketConnection on\")\n      socketConnection.on(\"message\", message => {\n        /*console.log(\"new publisher message:\")\r\n        console.log(message)*/\n        alert(`New message: ${message.message}`);\n        this.setState({\n          messages: [...this.state.messages, message]\n        });\n      });\n    }\n\n    this.setState({\n      messages: [],\n      webSocketConnection: socketConnection\n    });\n  }\n\n  async updateLogoutHandler() {\n    const userBasicInfo = await this.userApi.getUserBasicInfo();\n    await this.state.webSocketConnection.stop();\n    this.setState({\n      isLoggedIn: userBasicInfo.isLoggedIn,\n      userName: userBasicInfo.username,\n      role: userBasicInfo.userRole,\n      ownedStoreList: [],\n      managedStoreList: [],\n      webSocketConnection: undefined\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nApp.displayName = App.name;","map":{"version":3,"names":["Component","Login","HomePageSearch","Register","Payment","Supply","Button","StorePage","ShoppingCart","App","constructor","props","state","isLoggedIn","ownedStoreList","userName","role","undefined","messages","webSocketConnection","connectToWebSocket","socketConnection","HubConnectionBuilder","configureLogging","LogLevel","Debug","withUrl","skipNegotiation","transport","HttpTransportType","WebSockets","build","start","on","message","alert","setState","updateLogoutHandler","userBasicInfo","userApi","getUserBasicInfo","stop","username","userRole","managedStoreList","render","displayName","name"],"sources":["C:/Users/Tom/Desktop/university/thirdYear/semester6/SEWorkshop/TradingSystem/Client/src/App.js"],"sourcesContent":["import { Component } from 'react';\r\nimport './App.css';\r\nimport Login from './components/Login';\r\nimport HomePageSearch from './components/HomePageSearch';\r\nimport Register from './components/Register';\r\nimport Payment from './components/Payment';\r\nimport Supply from './components/Supply';\r\n// import * as React from 'react';\r\n// import ReactDOM from 'react-dom';\r\nimport Button from '@mui/material/Button';\r\nimport StorePage from './components/StorePage';\r\nimport ShoppingCart from './components/ShoppingCart';\r\n// function App() {\r\n//   return <Button variant=\"contained\">Hello World</Button>;\r\n// }\r\n\r\nexport default class App extends Component {\r\n  static displayName = App.name;\r\n\r\n  constructor(props) {\r\n      super(props)\r\n      this.state = {\r\n          isLoggedIn: false,\r\n          ownedStoreList:[],\r\n          userName:'',\r\n          role: undefined,\r\n\r\n          messages: [],\r\n          webSocketConnection: undefined\r\n      }\r\n      // this.userApi = new UserApi();\r\n      // this.storeApi = new StoreApi();\r\n\r\n      // this.addOwnedStoreHandler = this.addOwnedStoreHandler.bind(this);\r\n      // this.updateLoginHandler = this.updateLoginHandler.bind(this);\r\n      // this.updateLogoutHandler = this.updateLogoutHandler.bind(this);\r\n\r\n  }\r\n      \r\n\r\n    async connectToWebSocket(){\r\n        const socketConnection = new HubConnectionBuilder()\r\n            .configureLogging(LogLevel.Debug)\r\n            .withUrl(\"https://localhost:5001/messageHub\", {\r\n                skipNegotiation: true,\r\n                transport: HttpTransportType.WebSockets\r\n            })\r\n            .build();\r\n\r\n        //console.log(\"socketConnection\")\r\n\r\n        await socketConnection.start();\r\n        if(socketConnection) {\r\n            //console.log(\"socketConnection on\")\r\n\r\n            socketConnection.on(\"message\", message => {\r\n                /*console.log(\"new publisher message:\")\r\n                console.log(message)*/\r\n                alert(`New message: ${message.message}`)\r\n                this.setState({\r\n                    messages: [...this.state.messages, message]\r\n                });\r\n            });\r\n        }\r\n\r\n        this.setState({\r\n            messages: [],\r\n            webSocketConnection: socketConnection\r\n        });\r\n    }\r\n\r\n    \r\n\r\n  async updateLogoutHandler(){\r\n      const userBasicInfo = await this.userApi.getUserBasicInfo();\r\n      await this.state.webSocketConnection.stop();\r\n      this.setState({\r\n          isLoggedIn: userBasicInfo.isLoggedIn,\r\n          userName: userBasicInfo.username,\r\n          role: userBasicInfo.userRole,\r\n          ownedStoreList: [],\r\n          managedStoreList:[],\r\n          webSocketConnection: undefined\r\n      })\r\n  }\r\n\r\n\r\n  render () {\r\n    return (\r\n            <div> \r\n            {/* <HomePageSearch /> \r\n            <Payment/>\r\n            <Supply/>\r\n            <Register/>    */}\r\n            <Login />\r\n            {/* <StorePage/> */}\r\n\r\n            {/* <ShoppingCart/> */}\r\n          </div>\r\n    );\r\n  }\r\n}\r\n\r\n"],"mappings":";AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAO,WAAP;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,cAAP,MAA2B,6BAA3B;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA,OAAOC,MAAP,MAAmB,qBAAnB,C,CACA;AACA;;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,YAAP,MAAyB,2BAAzB,C,CACA;AACA;AACA;;;AAEA,eAAe,MAAMC,GAAN,SAAkBT,SAAlB,CAA4B;EAGzCU,WAAW,CAACC,KAAD,EAAQ;IACf,MAAMA,KAAN;IACA,KAAKC,KAAL,GAAa;MACTC,UAAU,EAAE,KADH;MAETC,cAAc,EAAC,EAFN;MAGTC,QAAQ,EAAC,EAHA;MAITC,IAAI,EAAEC,SAJG;MAMTC,QAAQ,EAAE,EAND;MAOTC,mBAAmB,EAAEF;IAPZ,CAAb,CAFe,CAWf;IACA;IAEA;IACA;IACA;EAEH;;EAGyB,MAAlBG,kBAAkB,GAAE;IACtB,MAAMC,gBAAgB,GAAG,IAAIC,oBAAJ,GACpBC,gBADoB,CACHC,QAAQ,CAACC,KADN,EAEpBC,OAFoB,CAEZ,mCAFY,EAEyB;MAC1CC,eAAe,EAAE,IADyB;MAE1CC,SAAS,EAAEC,iBAAiB,CAACC;IAFa,CAFzB,EAMpBC,KANoB,EAAzB,CADsB,CAStB;;IAEA,MAAMV,gBAAgB,CAACW,KAAjB,EAAN;;IACA,IAAGX,gBAAH,EAAqB;MACjB;MAEAA,gBAAgB,CAACY,EAAjB,CAAoB,SAApB,EAA+BC,OAAO,IAAI;QACtC;AAChB;QACgBC,KAAK,CAAE,gBAAeD,OAAO,CAACA,OAAQ,EAAjC,CAAL;QACA,KAAKE,QAAL,CAAc;UACVlB,QAAQ,EAAE,CAAC,GAAG,KAAKN,KAAL,CAAWM,QAAf,EAAyBgB,OAAzB;QADA,CAAd;MAGH,CAPD;IAQH;;IAED,KAAKE,QAAL,CAAc;MACVlB,QAAQ,EAAE,EADA;MAEVC,mBAAmB,EAAEE;IAFX,CAAd;EAIH;;EAIsB,MAAnBgB,mBAAmB,GAAE;IACvB,MAAMC,aAAa,GAAG,MAAM,KAAKC,OAAL,CAAaC,gBAAb,EAA5B;IACA,MAAM,KAAK5B,KAAL,CAAWO,mBAAX,CAA+BsB,IAA/B,EAAN;IACA,KAAKL,QAAL,CAAc;MACVvB,UAAU,EAAEyB,aAAa,CAACzB,UADhB;MAEVE,QAAQ,EAAEuB,aAAa,CAACI,QAFd;MAGV1B,IAAI,EAAEsB,aAAa,CAACK,QAHV;MAIV7B,cAAc,EAAE,EAJN;MAKV8B,gBAAgB,EAAC,EALP;MAMVzB,mBAAmB,EAAEF;IANX,CAAd;EAQH;;EAGD4B,MAAM,GAAI;IACR,oBACQ;MAAA,uBAKA,QAAC,KAAD;QAAA;QAAA;QAAA;MAAA;IALA;MAAA;MAAA;MAAA;IAAA,QADR;EAYD;;AApFwC;AAAtBpC,G,CACZqC,W,GAAcrC,GAAG,CAACsC,I"},"metadata":{},"sourceType":"module"}